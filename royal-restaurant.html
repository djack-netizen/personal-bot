<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Royal Restaurant — Paid Ad Dashboard</title>
<link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&display=swap" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.7/dist/chart.umd.min.js"></script>
<style>
*,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
:root{--bg:#0a0a1a;--card:rgba(255,255,255,0.04);--border:rgba(255,255,255,0.08);--text:#e4e4e7;--muted:#a1a1aa;--grad:linear-gradient(135deg,#6366f1,#3b82f6);--grad2:linear-gradient(135deg,#6366f1,#3b82f6,#00d4ff);--green:#22c55e;--red:#ef4444;--yellow:#eab308;--radius:16px;--pill:999px}
body{font-family:'Plus Jakarta Sans',Inter,system-ui,sans-serif;background:var(--bg);color:var(--text);line-height:1.5;min-height:100vh}
.fade-in{animation:fadeIn .5s ease}
@keyframes fadeIn{from{opacity:0;transform:translateY(8px)}to{opacity:1;transform:translateY(0)}}
.container{max-width:1200px;margin:0 auto;padding:32px 24px}
.title-area{margin-bottom:36px;text-align:center}
.title-area h1{font-size:clamp(1.5rem,4vw,2.2rem);font-weight:800;letter-spacing:-.03em;margin-bottom:4px}
.title-area .powered{color:var(--muted);font-size:.88rem;margin-bottom:14px}
.social-pills{display:flex;gap:10px;justify-content:center;margin-bottom:12px;flex-wrap:wrap}
.social-pill{display:inline-flex;align-items:center;gap:6px;border-radius:var(--pill);padding:5px 14px;font-size:.78rem;font-weight:600;border:1px solid transparent;background-origin:border-box;background-clip:padding-box,border-box;background-image:linear-gradient(var(--bg),var(--bg)),var(--grad2);color:var(--text);text-decoration:none;transition:all .25s}
.social-pill:hover{box-shadow:0 0 12px rgba(99,102,241,.3);transform:translateY(-1px)}
.social-pill svg{width:14px;height:14px;fill:currentColor}
.period-badge{display:inline-block;border-radius:var(--pill);padding:4px 14px;font-size:.75rem;color:var(--muted);border:1px solid var(--border);background:var(--card)}
.date-pills{display:flex;gap:8px}
.date-pill{border-radius:var(--pill);padding:6px 18px;font-size:.82rem;font-weight:600;cursor:pointer;border:1px solid var(--border);background:transparent;color:var(--muted);transition:all .25s}
.date-pill:hover{border-color:rgba(99,102,241,.4);color:var(--text)}
.date-pill.active{background:var(--grad);border-color:transparent;color:#fff;box-shadow:0 0 16px rgba(99,102,241,.35)}
.kpi-row{display:grid;grid-template-columns:repeat(6,1fr);gap:16px;margin-bottom:36px}
.kpi-card{background:var(--card);border:1px solid var(--border);border-radius:var(--radius);backdrop-filter:blur(10px);padding:22px 20px;transition:all .3s;position:relative;overflow:hidden}
.kpi-card::before{content:'';position:absolute;inset:0;border-radius:var(--radius);opacity:0;transition:opacity .3s;background:linear-gradient(135deg,rgba(99,102,241,.08),rgba(59,130,246,.06))}
.kpi-card:hover{transform:translateY(-3px);border-color:rgba(99,102,241,.25);box-shadow:0 8px 32px rgba(99,102,241,.12)}
.kpi-card:hover::before{opacity:1}
.kpi-label{font-size:.75rem;color:var(--muted);text-transform:uppercase;letter-spacing:.06em;font-weight:600;margin-bottom:8px}
.kpi-value{font-size:1.55rem;font-weight:800;letter-spacing:-.02em;margin-bottom:2px}
.kpi-change{font-size:.78rem;font-weight:600;margin-top:4px}
.kpi-change.up{color:#22c55e}
.kpi-change.down{color:#ef4444}
.kpi-change.neutral{color:var(--muted)}
.section-title{font-size:1.15rem;font-weight:700;margin-bottom:16px}
.table-wrap{background:var(--card);border:1px solid var(--border);border-radius:var(--radius);backdrop-filter:blur(10px);overflow-x:auto;margin-bottom:36px}
table{width:100%;border-collapse:collapse;min-width:600px}
th{text-align:left;padding:14px 16px;font-size:.7rem;color:var(--muted);text-transform:uppercase;letter-spacing:.08em;font-weight:600;border-bottom:1px solid var(--border)}
td{padding:14px 16px;font-size:.88rem;border-bottom:1px solid rgba(255,255,255,0.03)}
tr:last-child td{border-bottom:none}
tr:hover td{background:rgba(255,255,255,0.02)}
td a{color:var(--text);text-decoration:none;border-bottom:1px dashed rgba(255,255,255,0.2);transition:all .2s}
td a:hover{color:#818cf8;border-bottom-color:#818cf8}
.pill{display:inline-flex;align-items:center;border-radius:var(--pill);padding:3px 12px;font-size:.73rem;font-weight:600}
.pill-active{background:linear-gradient(135deg,#22c55e,#16a34a);color:#fff}
.pill-paused{background:rgba(234,179,8,.15);color:#eab308}
.chart-grid-row{display:grid;grid-template-columns:1fr 1fr;gap:24px;margin-bottom:36px}
.chart-area{background:var(--card);border:1px solid var(--border);border-radius:var(--radius);backdrop-filter:blur(10px);padding:24px;position:relative}
.chart-title{font-size:1rem;font-weight:700;margin-bottom:16px}
.chart-canvas-wrap{position:relative;width:100%;height:0;padding-bottom:38%}
.chart-canvas-wrap canvas{position:absolute;top:0;left:0;width:100%!important;height:100%!important}
.footer{text-align:center;padding:24px;color:var(--muted);font-size:.8rem;border-top:1px solid var(--border)}
.footer strong{color:var(--text);font-weight:700}
.data-container{transition:opacity .3s}
.data-container.switching{opacity:0}
@media(max-width:900px){.kpi-row{grid-template-columns:repeat(3,1fr)}.chart-grid-row{grid-template-columns:1fr}}
@media(max-width:600px){.kpi-row{grid-template-columns:1fr 1fr}.container{padding:20px 14px}.title-area h1{font-size:1.4rem}.chart-canvas-wrap{padding-bottom:50%}}
.view-link{display:inline-flex;align-items:center;gap:4px;color:#818cf8;font-size:.78rem;font-weight:600;text-decoration:none;transition:all .2s;white-space:nowrap}
.view-link:hover{color:#a5b4fc;text-decoration:underline}
.view-link svg{width:12px;height:12px;fill:currentColor}
@media print{
  body{background:#fff;color:#111}
  .kpi-card,.table-wrap,.chart-area{background:#f8f8f8;border:1px solid #ddd;backdrop-filter:none;color:#111}
  .kpi-value,.section-title,.chart-title{color:#111}
  .kpi-label,.footer{color:#555}
}
</style>
</head>
<body>

<div class="container">
  <div class="title-area fade-in">
    <h1>Royal Restaurant Paid Ad Dashboard</h1>
    <div class="powered">Powered by <strong>OPN Agency</strong></div>
    <div class="social-pills">
      <a href="https://www.facebook.com/theroyalrestaurantva" target="_blank" class="social-pill"><svg viewBox="0 0 24 24"><path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/></svg>Facebook</a>
      <a href="https://www.instagram.com/royalrestaurantalx" target="_blank" class="social-pill"><svg viewBox="0 0 24 24"><path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zM12 0C8.741 0 8.333.014 7.053.072 2.695.272.273 2.69.073 7.052.014 8.333 0 8.741 0 12c0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98C8.333 23.986 8.741 24 12 24c3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98C15.668.014 15.259 0 12 0zm0 5.838a6.162 6.162 0 100 12.324 6.162 6.162 0 000-12.324zM12 16a4 4 0 110-8 4 4 0 010 8zm6.406-11.845a1.44 1.44 0 100 2.881 1.44 1.44 0 000-2.881z"/></svg>Instagram</a>
      <a href="https://adsmanager.facebook.com/adsmanager/manage/campaigns?act=10153753733980167" target="_blank" class="social-pill"><svg viewBox="0 0 24 24"><path d="M12 0C5.373 0 0 5.373 0 12s5.373 12 12 12 12-5.373 12-12S18.627 0 12 0zm1 17h-2v-6h2v6zm0-8h-2V7h2v2z"/></svg>Ads Manager</a>
    </div>
    <div style="display:flex;align-items:center;gap:10px;flex-wrap:wrap;margin-top:4px;justify-content:center">
      <div class="period-badge" id="periodBadge">Feb 16 – Feb 22, 2026</div>
      <div class="date-pills">
        <div class="date-pill active" onclick="setRange(7)">7 Days</div>
        <div class="date-pill" onclick="setRange(14)">14 Days</div>
        <div class="date-pill" onclick="setRange(30)">30 Days</div>
      </div>
    </div>
  </div>

  <div class="data-container" id="dataContainer">
    <div class="kpi-row fade-in" id="kpiRow"></div>

    <div class="section-title fade-in">Active Campaigns</div>
    <div class="table-wrap fade-in">
      <table>
        <thead>
          <tr><th>Campaign</th><th>Status</th><th>Spend</th><th>Impressions</th><th>Clicks</th><th>CTR</th><th>CPC</th><th>Ad Link</th></tr>
        </thead>
        <tbody id="campaignBody"></tbody>
      </table>
    </div>

    <div class="chart-grid-row fade-in">
      <div class="chart-area">
        <div class="chart-title">Daily Ad Spend</div>
        <div class="chart-canvas-wrap"><canvas id="spendChart"></canvas></div>
      </div>
      <div class="chart-area">
        <div class="chart-title">Impressions vs Clicks</div>
        <div class="chart-canvas-wrap"><canvas id="impClickChart"></canvas></div>
      </div>
    </div>
  </div>
</div>

<div class="footer">
  Dashboard generated by <strong>OPN Agency</strong> · Data from Meta Ads API · Last updated: 2026-02-25 05:24:00 UTC
</div>

<script>
const AD_ACCOUNT = {"id":"act_10153753733980167","name":"ARP / Royal Restaurant"};
const ADS_MGR = "https://adsmanager.facebook.com/adsmanager/manage/campaigns?act=10153753733980167";

const DAILY = [{"date":"2026-01-26","spend":26.59,"impressions":4580,"clicks":316,"reach":4545},{"date":"2026-01-27","spend":26.56,"impressions":4213,"clicks":325,"reach":4040},{"date":"2026-01-28","spend":25.54,"impressions":3904,"clicks":269,"reach":3741},{"date":"2026-01-29","spend":25.43,"impressions":3747,"clicks":256,"reach":3601},{"date":"2026-01-30","spend":25.83,"impressions":4202,"clicks":286,"reach":3972},{"date":"2026-01-31","spend":25.14,"impressions":4415,"clicks":292,"reach":4178},{"date":"2026-02-01","spend":28.32,"impressions":5072,"clicks":319,"reach":4693},{"date":"2026-02-02","spend":43.42,"impressions":7680,"clicks":509,"reach":7032},{"date":"2026-02-03","spend":45.19,"impressions":7508,"clicks":526,"reach":6823},{"date":"2026-02-04","spend":43.45,"impressions":6841,"clicks":556,"reach":6469},{"date":"2026-02-05","spend":59.84,"impressions":8697,"clicks":666,"reach":7996},{"date":"2026-02-06","spend":75.1,"impressions":10828,"clicks":773,"reach":9742},{"date":"2026-02-07","spend":68.67,"impressions":10116,"clicks":579,"reach":9251},{"date":"2026-02-08","spend":70.66,"impressions":9893,"clicks":584,"reach":9028},{"date":"2026-02-09","spend":43.13,"impressions":6359,"clicks":373,"reach":5922},{"date":"2026-02-10","spend":26.08,"impressions":3798,"clicks":166,"reach":3414},{"date":"2026-02-11","spend":24.94,"impressions":3999,"clicks":161,"reach":3640},{"date":"2026-02-12","spend":25.35,"impressions":4314,"clicks":133,"reach":3984},{"date":"2026-02-13","spend":24.75,"impressions":3880,"clicks":151,"reach":3501},{"date":"2026-02-14","spend":22.45,"impressions":3707,"clicks":131,"reach":3430},{"date":"2026-02-15","spend":25.89,"impressions":3814,"clicks":169,"reach":3513},{"date":"2026-02-16","spend":24.74,"impressions":3779,"clicks":158,"reach":3592},{"date":"2026-02-17","spend":22.18,"impressions":3432,"clicks":160,"reach":3245},{"date":"2026-02-18","spend":22.6,"impressions":3256,"clicks":150,"reach":3084},{"date":"2026-02-19","spend":23.17,"impressions":3468,"clicks":176,"reach":3337},{"date":"2026-02-20","spend":21.23,"impressions":3129,"clicks":171,"reach":3032},{"date":"2026-02-21","spend":20.86,"impressions":3186,"clicks":165,"reach":2916},{"date":"2026-02-22","spend":25.66,"impressions":4093,"clicks":186,"reach":3882},{"date":"2026-02-23","spend":19.36,"impressions":3738,"clicks":150,"reach":3521},{"date":"2026-02-24","spend":33.87,"impressions":4925,"clicks":283,"reach":4613}];

const KPI = {"7":{"spend":166.75,"impressions":25795,"clicks":1281,"ctr":4.966079,"cpc":0.130172,"reach":19315,"leads":0,"video_views":2913,"prev":{"spend":170.3,"impressions":26925,"clicks":1063,"ctr":3.948004,"cpc":0.160207,"reach":18630,"leads":0,"video_views":3275}},"30":{"spend":996.0,"impressions":154573,"clicks":9139,"ctr":5.912417,"cpc":0.108983,"reach":88036,"leads":0,"video_views":38242,"prev":{"spend":790.89,"impressions":128090,"clicks":9094,"ctr":7.099696,"cpc":0.086968,"reach":70432,"leads":1,"video_views":33319}}};

const CAMPAIGNS_BY_RANGE = {"7":[{"name":"OPN_Catering Jan-Feb Offer_Static","id":"6980676091382","spend":70.3,"impressions":10765,"clicks":276,"ctr":2.563864,"cpc":0.25471,"reach":7412,"leads":0,"video_views":0,"status":"Active"},{"name":"OPN_RoyalRestaurant_DateNight","id":"6863325609182","spend":40.83,"impressions":6251,"clicks":442,"ctr":7.070869,"cpc":0.092376,"reach":5293,"leads":0,"video_views":1905,"status":"Active"},{"name":"OPN_PAIDAD_Happy Hour","id":"6917226822982","spend":35.15,"impressions":6029,"clicks":380,"ctr":6.302869,"cpc":0.0925,"reach":5111,"leads":0,"video_views":0,"status":"Active"},{"name":"OPN_Dinner Focus_Reels","id":"6991904609582","spend":11.15,"impressions":1426,"clicks":86,"ctr":6.030856,"cpc":0.129651,"reach":1370,"leads":0,"video_views":583,"status":"Active"},{"name":"OPN_Cozy Decor_Reel 1","id":"6991897872382","spend":9.32,"impressions":1324,"clicks":97,"ctr":7.326284,"cpc":0.096082,"reach":1288,"leads":0,"video_views":425,"status":"Active"}],"14":[{"name":"OPN_Catering Jan-Feb Offer_Static","id":"6980676091382","spend":140.61,"impressions":20837,"clicks":484,"ctr":2.322791,"cpc":0.290517,"reach":11516,"leads":0,"video_views":0,"status":"Active"},{"name":"OPN_RoyalRestaurant_DateNight","id":"6863325609182","spend":97.27,"impressions":16311,"clicks":914,"ctr":5.60358,"cpc":0.106422,"reach":12446,"leads":0,"video_views":4887,"status":"Active"},{"name":"OPN_PAIDAD_Happy Hour","id":"6917226822982","spend":70.37,"impressions":11290,"clicks":715,"ctr":6.333038,"cpc":0.09842,"reach":8767,"leads":0,"video_views":0,"status":"Active"},{"name":"OPN_Dinner Focus_Reels","id":"6991904609582","spend":11.15,"impressions":1426,"clicks":86,"ctr":6.030856,"cpc":0.129651,"reach":1370,"leads":0,"video_views":583,"status":"Active"},{"name":"OPN_Cozy Decor_Reel 1","id":"6991897872382","spend":9.32,"impressions":1324,"clicks":97,"ctr":7.326284,"cpc":0.096082,"reach":1288,"leads":0,"video_views":425,"status":"Active"},{"name":"OPN_Private Events_Reel_Jan 14_Top","id":"6971168409582","spend":8.33,"impressions":1532,"clicks":48,"ctr":3.133159,"cpc":0.173542,"reach":1351,"leads":0,"video_views":293,"status":"Active"}],"30":[{"name":"OPN_RoyalRestaurant_DateNight","id":"6863325609182","spend":225.19,"impressions":37079,"clicks":2104,"ctr":5.674371,"cpc":0.107029,"reach":24596,"leads":0,"video_views":11574,"status":"Active"},{"name":"OPN_Catering Jan-Feb Offer_Static","id":"6980676091382","spend":198.2,"impressions":29274,"clicks":689,"ctr":2.353624,"cpc":0.287663,"reach":14462,"leads":0,"video_views":4,"status":"Active"},{"name":"OPN_PAIDAD_Happy Hour","id":"6917226822982","spend":150.12,"impressions":23547,"clicks":1539,"ctr":6.535864,"cpc":0.097544,"reach":15566,"leads":0,"video_views":0,"status":"Active"},{"name":"OPN_Vday Pre-Fixe Menu","id":"6978982483182","spend":140.85,"impressions":22601,"clicks":1737,"ctr":7.685501,"cpc":0.081088,"reach":15055,"leads":0,"video_views":9082,"status":"Active"},{"name":"OPN_Music Mondays_Reel_Jan 2","id":"6969176309182","spend":125.58,"impressions":19561,"clicks":1640,"ctr":8.384029,"cpc":0.076573,"reach":14677,"leads":0,"video_views":9731,"status":"Active"},{"name":"OPN_VDay_Reel 1","id":"6980797845182","spend":75.91,"impressions":9216,"clicks":807,"ctr":8.75651,"cpc":0.094064,"reach":7704,"leads":0,"video_views":4504,"status":"Active"},{"name":"OPN_Private Events_Reel_Jan 14_Top","id":"6971168409582","spend":59.68,"impressions":10545,"clicks":440,"ctr":4.172594,"cpc":0.135636,"reach":7883,"leads":0,"video_views":2339,"status":"Active"},{"name":"OPN_Dinner Focus_Reels","id":"6991904609582","spend":11.15,"impressions":1426,"clicks":86,"ctr":6.030856,"cpc":0.129651,"reach":1370,"leads":0,"video_views":583,"status":"Active"},{"name":"OPN_Cozy Decor_Reel 1","id":"6991897872382","spend":9.32,"impressions":1324,"clicks":97,"ctr":7.326284,"cpc":0.096082,"reach":1288,"leads":0,"video_views":425,"status":"Active"}]};

let currentRange = 7;
let spendChart, impClickChart;

function fmt(n){return n.toLocaleString('en-US')}

function setRange(r) {
  if (r === currentRange) return;
  currentRange = r;
  document.querySelectorAll('.date-pill').forEach(function(p) {
    p.classList.toggle('active', parseInt(p.textContent) === r);
  });
  var dc = document.getElementById('dataContainer');
  dc.classList.add('switching');
  setTimeout(function() { render(r); renderCampaigns(r); dc.classList.remove('switching'); }, 300);
}

function render(r) {
  var k = KPI[r];
  document.getElementById('periodBadge').textContent = k.period;

  var prev = k.prev || {};
  var curVals = {
    spend: parseFloat(k.spend.replace(/[$,]/g,'')),
    impressions: parseInt(k.impressions.replace(/,/g,'')),
    reach: parseInt(k.reach.replace(/,/g,'')),
    clicks: parseInt(k.clicks.replace(/,/g,'')),
    ctr: parseFloat(k.ctr),
    cpc: parseFloat(k.cpc.replace('$',''))
  };
  function pctChange(cur, prv, invert) {
    if (!prv || prv === 0) return '';
    var pct = ((cur - prv) / prv * 100).toFixed(1);
    var isUp = pct > 0;
    if (invert) isUp = !isUp;
    var cls = pct == 0 ? 'neutral' : (isUp ? 'up' : 'down');
    var arrow = pct > 0 ? '\u2191' : (pct < 0 ? '\u2193' : '\u2192');
    return '<div class="kpi-change ' + cls + '">' + arrow + ' ' + Math.abs(pct) + '% vs prior</div>';
  }
  var kpis = [
    {label:'Total Spend',value:k.spend, change: pctChange(curVals.spend, prev.spend, false)},
    {label:'Impressions',value:k.impressions, change: pctChange(curVals.impressions, prev.impressions, false)},
    {label:'Reach',value:k.reach, change: pctChange(curVals.reach, prev.reach, false)},
    {label:'Clicks',value:k.clicks, change: pctChange(curVals.clicks, prev.clicks, false)},
    {label:'CTR',value:k.ctr, change: pctChange(curVals.ctr, prev.ctr, false)},
    {label:'CPC',value:k.cpc, change: pctChange(curVals.cpc, prev.cpc, true)}
  ];
  var kpiHTML = '';
  for (var i = 0; i < kpis.length; i++) {
    kpiHTML += '<div class="kpi-card"><div class="kpi-label">' + kpis[i].label + '</div><div class="kpi-value">' + kpis[i].value + '</div>' + (kpis[i].change || '') + '</div>';
  }
  document.getElementById('kpiRow').innerHTML = kpiHTML;

  var sliced = DAILY.slice(-r);
  var labels = [];
  var spendData = [];
  var impData = [];
  var clickData = [];
  for (var j = 0; j < sliced.length; j++) {
    labels.push(sliced[j].d || sliced[j].date || '');
    spendData.push(sliced[j].spend);
    impData.push(sliced[j].imp || sliced[j].impressions || 0);
    clickData.push(sliced[j].clicks);
  }

  if(spendChart) spendChart.destroy();
  if(impClickChart) impClickChart.destroy();

  var gridColor = 'rgba(255,255,255,0.06)';
  var tickColor = '#a1a1aa';

  spendChart = new Chart(document.getElementById('spendChart'), {
    type:'bar',
    data:{labels:labels, datasets:[{label:'Spend ($)',data:spendData,backgroundColor:'rgba(99,102,241,0.7)',borderRadius:4,borderSkipped:false}]},
    options:{responsive:true,maintainAspectRatio:false,plugins:{legend:{display:false}},scales:{x:{ticks:{color:tickColor,font:{size:10},maxRotation:45},grid:{display:false}},y:{ticks:{color:tickColor,callback:function(v){return '$'+v}},grid:{color:gridColor}}}}
  });

  impClickChart = new Chart(document.getElementById('impClickChart'), {
    type:'line',
    data:{labels:labels, datasets:[
      {label:'Impressions',data:impData,borderColor:'#6366f1',backgroundColor:'rgba(99,102,241,0.1)',fill:true,tension:.3,yAxisID:'y',pointRadius:2},
      {label:'Clicks',data:clickData,borderColor:'#22c55e',backgroundColor:'rgba(34,197,94,0.1)',fill:true,tension:.3,yAxisID:'y1',pointRadius:2}
    ]},
    options:{responsive:true,maintainAspectRatio:false,interaction:{mode:'index',intersect:false},plugins:{legend:{labels:{color:tickColor,font:{size:11}}}},scales:{
      x:{ticks:{color:tickColor,font:{size:10},maxRotation:45},grid:{display:false}},
      y:{type:'linear',position:'left',ticks:{color:'#6366f1',callback:function(v){return fmt(v)}},grid:{color:gridColor},title:{display:true,text:'Impressions',color:'#6366f1',font:{size:11}}},
      y1:{type:'linear',position:'right',ticks:{color:'#22c55e'},grid:{drawOnChartArea:false},title:{display:true,text:'Clicks',color:'#22c55e',font:{size:11}}}
    }}
  });
}

function renderCampaigns(r) {
  var tbody = document.getElementById('campaignBody');
  var camps = CAMPAIGNS_BY_RANGE[r] || CAMPAIGNS_BY_RANGE["7"] || [];
  if (camps.length === 0) {
    tbody.innerHTML = '<tr><td colspan="8" style="text-align:center;color:var(--muted);padding:24px">No campaigns with spend in this period</td></tr>';
    return;
  }
  function toNum(v){return typeof v==='number'?v:parseFloat(String(v).replace(/[$,%]/g,''))}
  function toMoney(v){var n=toNum(v);return '$'+n.toFixed(2)}
  function toComma(v){var n=toNum(v);return Math.round(n).toLocaleString('en-US')}
  function toPct(v){var n=toNum(v);return n.toFixed(2)+'%'}
  var sorted = camps.slice().sort(function(a,b){return toNum(b.spend)-toNum(a.spend)});
  var html = '';
  for (var c = 0; c < sorted.length; c++) {
    var camp = sorted[c];
    var adLink = ADS_MGR + '&selected_campaign_ids=' + camp.id;
    var imp = camp.imp || camp.impressions || 0;
    var statusCls = (camp.status||'Active')==='Active'?'pill-active':'pill-paused';
    html += '<tr><td style="font-weight:600">' + camp.name + '</td><td><span class="pill ' + statusCls + '">' + (camp.status||'Active') + '</span></td><td>' + toMoney(camp.spend) + '</td><td>' + toComma(imp) + '</td><td>' + toComma(camp.clicks) + '</td><td>' + toPct(camp.ctr) + '</td><td>' + toMoney(camp.cpc) + '</td><td><a href="' + adLink + '" target="_blank" class="view-link"><svg viewBox="0 0 24 24"><path d="M14 3v2h3.59l-9.83 9.83 1.41 1.41L19 6.41V10h2V3h-7z"/><path d="M5 5v14h14v-7h2v7c0 1.1-.9 2-2 2H5c-1.1 0-2-.9-2-2V5c0-1.1.9-2 2-2h7v2H5z"/></svg>View</a></td></tr>';
  }
  tbody.innerHTML = html;
}

renderCampaigns(7);

render(7);
</script>
</body>
</html>
